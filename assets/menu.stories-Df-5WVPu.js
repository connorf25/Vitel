import"./index-BCAj_bCp.js";import{q as y}from"./popper-Bnif2dgu.js";import{_ as h}from"./toast-Dy2nnG-1.js";import{V as f}from"./vitel-De4LWFz0.js";import{c as g,e as n,C as b,a as k,o as w}from"./vue.esm-bundler-CIUkA9VC.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as x}from"./entry-preview-BsfXFv1X.js";import"./isArrayLike-DYVE1Yub.js";import"./isObjectLike-Dipz0mOK.js";import"./isArray-Dxzbedgu.js";const m={name:"$menu",data(){return{nextId:1,dropdowns:{},backdropEl:null}},methods:{async open(t){let e={el:null,items:[],placement:"bottom",show:!0,autoClose:!0,backdrop:"close",...t};if(!e.el)throw new Error("No `el` element or query selector specified");let o=this.create({items:e.items,placement:e.placement,autoClose:e.autoClose,backdrop:e.backdrop});await this.attach(o,e.el),this.toggle(o,e.show)},create(t){let e={id:`menu-${this.nextId++}`,items:[],placement:"bottom",autoClose:!0,backdrop:"close",...t},o=`#${e.id}`,s=document.createElement("div");return s.id=e.id,s.classList.add("dropdown-menu","menu-service"),document.body.appendChild(s),this.dropdowns[o]={menu:s,autoClose:e.autoClose,backdrop:e.backdrop,placement:e.placement,popper:null},this.updateItems(o,e.items),o},updateItems(t,e){if(!this.dropdowns[t])throw new Error(`No Dropdown exists for ID "${t}"`);this.dropdowns[t].menu.replaceChildren(...e.flatMap(o=>{if(o==="-"){let s=document.createElement("div");return s.classList.add("dropdown-divider"),s}else{let s=document.createElement("a");if(s.classList.add(o.class||"dropdown-item"),o.html?s.innerHTML=o.html:o.text?s.innerText=o.text:s.innerHTML="&nbsp;",o.icon){let r=document.createElement("i");r.classList.add(o.icon),r.append(r)}return o.handler&&s.addEventListener("click",()=>{(o.autoClose??this.dropdowns[t].autoClose)&&this.toggle(t,!1),o.handler.call(o.context||this.$root)}),s}}))},async attach(t,e){if(!this.dropdowns[t])throw new Error(`No Dropdown exists for ID "${t}"`);let o=typeof e=="string"?document.body.querySelector(e):e;this.dropdowns[t].popper?await this.dropdowns[t].popper.setOptions({reference:o}):this.dropdowns[t].popper=y(o,this.dropdowns[t].menu,{placement:this.dropdowns[t].placement})},toggle(t,e="toggle"){if(!this.dropdowns[t])throw new Error(`No Dropdown object present for ID "${t}"`);let o=e=="toggle"?!this.dropdowns[t].menu.has("open"):e;this.dropdowns[t].menu.classList.toggle("open",o),this.dropdowns[t].backdrop!==!1&&this.backdropEl.classList.toggle("open",o)},close(t){if(t)return this.toggle(t);Object.keys(this.dropdowns).forEach(e=>this.toggle(e,!1))}},created(){this.backdropEl=document.createElement("div"),this.backdropEl.classList.add("menu-service-backdrop"),this.backdropEl.addEventListener("click",()=>this.close()),document.body.appendChild(this.backdropEl);let t=document.createElement("style");t.innerText=[".menu-service.dropdown-menu {","user-select: none;","display: none;","}",".menu-service.dropdown-menu.open {","display: block;","}",".menu-service.dropdown-menu a.dropdown-item {","cursor: pointer;","}",".menu-service-backdrop {","display: none;","position: fixed;","z-index: 1000;","top: 0px;","left: 0px;","right: 0px;","bottom: 0px;","background: #000;","opacity: 0.1;","}",".menu-service-backdrop.open {","display: block;","}"].join(`
`),document.body.appendChild(t)}};m.__docgenInfo={exportName:"default",displayName:"menu",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void",schema:[]}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"}],events:[],slots:[],exposed:[{name:"nextId",type:"number",description:"ID tracker to ensure all menu IDs are unique",declarations:[],schema:"number"},{name:"dropdowns",type:"{}",description:`Lookup for MenuIDs to their Bootstrap.Dropdown handles
Each key is the DOMID -> Object`,declarations:[],schema:{kind:"object",type:"{}",schema:{}}},{name:"backdropEl",type:"any",description:"Backdrop DOM element",declarations:[],schema:"any"}],sourceFiles:"/home/runner/work/Vitel/Vitel/services/menu.vue"};const u={methods:{testMenu(t){this.$menu.open({el:this.$refs.menuTarget,items:[{text:"Foo",handler:()=>this.$toast.success("You clicked Foo!")},{text:"Bar",handler:()=>this.$toast.warning("You clicked Bar!")},"-",{text:"Baz",handler:()=>this.$toast.error("You clicked Baz!")}],...t})}}},E={class:"card mb-2"},$={class:"card-body"},C={class:"d-flex justify-content-center align-items-center",style:{height:"150px"}},_={class:"list-group"},M={class:"list-group"};function q(t,e,o,s,r,i){return w(),g("div",null,[n("div",E,[e[6]||(e[6]=n("div",{class:"card-header"},"$loader methods",-1)),n("div",$,[e[4]||(e[4]=n("p",null,"General Bootstrap-style Menu handler.",-1)),e[5]||(e[5]=n("p",null,"Suitable for generic menu objects or context-menus against elements.",-1)),n("div",C,[n("button",{ref:"menuTarget",onContextmenu:e[0]||(e[0]=b(l=>i.testMenu(),["prevent"])),class:"btn btn-light"},e[3]||(e[3]=[k(" Context menu target"),n("br",null,null,-1),n("span",{class:"text-muted"},"(right click this)",-1)]),544)]),n("div",_,[n("a",{onClick:e[1]||(e[1]=l=>i.testMenu()),class:"list-group-item list-group-item-action"},"$menu.open({el: $refs.menuTarget, items: [...]})})")]),n("div",M,[n("a",{ref:"listMenu",onClick:e[2]||(e[2]=l=>i.testMenu({el:t.$refs.listMenu,placement:"bottom-start"})),class:"list-group-item list-group-item-action"},"$menu.open({el: $refs.listMenu, placement: 'bottom-start', items: [...]})})",512)])])])])}const D=v(u,[["render",q]]);u.__docgenInfo={exportName:"default",displayName:"menu.demo",type:1,props:[{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void",schema:[]}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"}],events:[],slots:[],exposed:[],sourceFiles:"/home/runner/work/Vitel/Vitel/services/menu.demo.vue"};x(t=>{t.use(f),t.service("$menu",m),t.service("$toast",h)});const S={title:"Services/Menu",component:D,tags:["autodocs"],argTypes:{}},a={};var d,p,c;a.parameters={...a.parameters,docs:{...(d=a.parameters)==null?void 0:d.docs,source:{originalSource:"{}",...(c=(p=a.parameters)==null?void 0:p.docs)==null?void 0:c.source}}};const F=["Example"];export{a as Example,F as __namedExportsOrder,S as default};
