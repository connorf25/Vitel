import"./index-BCAj_bCp.js";import{c as b,d as f,o as y,e as v,a as E}from"./vue.esm-bundler-CIUkA9VC.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as L}from"./http-BXV5vmy8.js";import{V as k}from"./vitel-De4LWFz0.js";import{s as D}from"./entry-preview-BsfXFv1X.js";import"./_commonjsHelpers-C4iS2aBk.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./_baseSlice-BD4yksuF.js";import"./isObjectLike-Dipz0mOK.js";import"./isArray-Dxzbedgu.js";import"./isSymbol-C1qQj8zB.js";import"./isArrayLike-DYVE1Yub.js";import"./_isIterateeCall-B847D5xG.js";const u={emits:["change"],data(){return{globalEl:null,eventGlobalDragLeave:this.showGlobalDropable.bind(this,"hide")}},props:{global:{type:Boolean,default:!1},globalSelector:{type:String,default:"body"},multiple:{type:Boolean,default:!0},accept:{type:String}},methods:{select(e){let a={multiple:this.multiple,accept:this.accept,...e};return new Promise((o,i)=>{let l=document.createElement("div");l.classList.add("d-none"),document.body.append(l);let t=document.createElement("input");t.type="file",a.multiple&&(t.multiple=!0),a.accept&&(t.accept=a.accept),l.append(t),t.addEventListener("change",r=>{r.target.files.length>0?o(r.target.files):i("CANCEL"),l.remove()}),t.addEventListener("cancel",()=>{l.remove(),i()}),t.click()}).then(o=>{this.showGlobalDropable("hide"),this.$emit("change",o)})},dragDrop(e){e.stopPropagation(),e.preventDefault(),this.showGlobalDropable("hide"),this.$emit("change",e.dataTransfer.files)},dragOver(e){e.preventDefault(),this.showGlobalDropable("show")},dragLeave(){this.showGlobalDropable("hide")},showGlobalDropable(e){let a=document.querySelector(this.globalSelector);switch(e){case"show":this.globalEl||this.showGlobalDropable("create"),this.globalEl.classList.add("active");break;case"hide":this.globalEl.classList.remove("active");break;case"toggle":this.globalEl||this.showGlobalDropable("create"),this.globalEl.classList.toggle("active");break;case"create":if(!a)throw new Error(`Unable to find file-drop#globalSelector "${this.globalSelector}"`);a.addEventListener("dragover",this.dragOver),a.addEventListener("drop",this.dragDrop),this.globalEl=document.createElement("div"),this.globalEl.classList.add("file-drop-global"),this.globalEl.innerHTML=['<i class="fas fa-file-arrow-up"></i>',"<div>Drop files to upload</div>"].join(`
`),this.globalEl.addEventListener("mousemove",()=>this.showGlobalDropable("hide")),this.globalEl.addEventListener("dragleave",this.dragLeave),this.globalEl.addEventListener("drop",this.dragDrop),a.append(this.globalEl);break;case"destroy":if(!this.globalEl)return;a.removeEventListener("dragover",this.dragOver),a.removeEventListener("drop",this.dragDrop),this.globalEl.remove(),this.globalEl=null;break;default:throw new Error(`Unsupported showGlobalDropable() method: "${e}"`)}}},mounted(){this.$el.addEventListener("drop",e=>this.selectFromEvent(e)),this.$el.addEventListener("dragover",()=>this.$el.classList.add("dropping")),this.$el.addEventListener("dragleave",()=>this.$el.classList.add("dropping"))},watch:{global:{immediate:!0,handler(){this.showGlobalDropable(this.global?"create":"destroy")}}}};function G(e,a,o,i,l,t){return y(),b("div",{class:"file-drop",onClick:a[0]||(a[0]=(...r)=>t.select&&t.select(...r))},[f(e.$slots,"prompt",{},()=>[a[1]||(a[1]=v("a",null,"Select a file",-1)),a[2]||(a[2]=E(" or drag-and-drop a file here. "))])])}const $=w(u,[["render",G]]);u.__docgenInfo={exportName:"default",displayName:"file-drop",type:1,props:[{name:"global",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"false"},{name:"globalSelector",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string",default:'"body"'},{name:"multiple",global:!1,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]},default:"true"},{name:"key",global:!0,description:"",tags:[],required:!1,type:"PropertyKey",declarations:[],schema:{kind:"enum",type:"PropertyKey",schema:["string","number","symbol"]}},{name:"ref",global:!0,description:"",tags:[],required:!1,type:"VNodeRef",declarations:[],schema:{kind:"enum",type:"VNodeRef",schema:["string","Ref<any, any>",{kind:"event",type:"(ref: Element | ComponentPublicInstance<{}, {}, {}, {}, {}, {}, {}, {}, false, ComponentOptionsBase<any, any, any, any, any, any, any, any, any, {}, {}, string, {}, {}, {}, string, ComponentProvideOptions>, ... 4 more ..., any>, refs: Record<...>): void",schema:[]}]}},{name:"ref_for",global:!0,description:"",tags:[],required:!1,type:"boolean",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"ref_key",global:!0,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"},{name:"class",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"style",global:!0,description:"",tags:[],required:!1,type:"unknown",declarations:[],schema:"unknown"},{name:"accept",global:!1,description:"",tags:[],required:!1,type:"string",declarations:[],schema:"string"}],events:[{name:"change",type:"any[]",signature:'(event: "change", ...args: any[]): void',declarations:[],schema:["any"]}],slots:[],exposed:[{name:"global",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"globalSelector",type:"string",description:"",declarations:[],schema:"string"},{name:"multiple",type:"boolean",description:"",declarations:[],schema:{kind:"enum",type:"boolean",schema:["false","true"]}},{name:"accept",type:"string",description:"",declarations:[],schema:"string"},{name:"globalEl",type:"any",description:"",declarations:[],schema:"any"},{name:"eventGlobalDragLeave",type:"any",description:"",declarations:[],schema:"any"}],sourceFiles:"/home/runner/work/Vitel/Vitel/components/file-drop.vue"};D(e=>{e.use(k),e.service("$http",L)});const T={title:"Components/File-Drop",component:$,tags:["autodocs"]},s={args:{}},n={args:{global:!0}};var d,p,c;s.parameters={...s.parameters,docs:{...(d=s.parameters)==null?void 0:d.docs,source:{originalSource:`{
  args: {}
}`,...(c=(p=s.parameters)==null?void 0:p.docs)==null?void 0:c.source}}};var m,g,h;n.parameters={...n.parameters,docs:{...(m=n.parameters)==null?void 0:m.docs,source:{originalSource:`{
  args: {
    global: true
  }
}`,...(h=(g=n.parameters)==null?void 0:g.docs)==null?void 0:h.source}}};const K=["Example","GlobalHandling"];export{s as Example,n as GlobalHandling,K as __namedExportsOrder,T as default};
